


<span id= "20174701">人力看板（高级查询）</span>
----------

```sql
SELECT
	*
FROM
	PDRC_V_Profile
WHERE
	ProfileId IN (
		SELECT DISTINCT
			ProfileId
		FROM
			PDRC_V_Profile
		WHERE
			DomainKey = 'DM01'
		AND SkillKey = 'SK01'
		AND WorkPlaceKey = 'CC02'
		AND stateKey = 'E3566'
	);
```

视图：PDRC_V_Profile

```sql
SELECT
	pwp.WorkPlaceKey,
	d1.[value] AS WorkPlaceName,
	pwp.IsCurrentWorkPlace,
	p.StateKey,
	d2.[value] AS StateName,
	ps.SkillKey SkillKey,
	d3.[value] AS SkillName,
	pd.DomainKey DomainKey,
	d4.[value] AS DomainName,
	pb.ServiceYear,
	p.ID ProfileId,
	p.WorkID WorkID,
	u.username UserName
FROM
	PDRC_Profile p
JOIN PDRC_ProfileBaseInfo pb ON p.WorkID = pb.WorkID
LEFT OUTER JOIN PDRC_ProfileSkill ps ON p.ID = ps.ProfileId
LEFT OUTER JOIN PDRC_ProfileDomain pd ON p.id = pd.ProfileId
LEFT OUTER JOIN PDRC_ProfileWorkPlace pwp ON p.id = pwp.ProfileId
LEFT OUTER JOIN PDRC_User u ON u.WorkId = p.WorkID
JOIN PDRC_Dictionary d2 ON d2.KeyName = p.StateKey
LEFT OUTER JOIN PDRC_Dictionary d1 ON d1.KeyName = pwp.WorkPlaceKey
LEFT OUTER JOIN PDRC_Dictionary d3 ON d3.KeyName = SkillKey
LEFT OUTER JOIN PDRC_Dictionary d4 ON d4.KeyName = DomainKey
```



<span id= "20174702">任务看板（高级查询）</span>
----------
```sql
SELECT
	TaskItemId,
	TaskItemDescription,
	SkillName,
	DomainName,
	ServiceYear,
	BSM,
	WorkPlaceName,
	PlanStartDate,
	PlanEndDate
FROM
	PDRC_V_TaskItem
WHERE
	TaskItemId IN (
		SELECT DISTINCT
			TaskItemId
		FROM
			PDRC_V_TaskItem
		WHERE
			SkillKey = 'SK01'
		AND DomainKey = 'DM01'
		AND WorkPlace = 'CC02'
	);

```


视图：PDRC_V_TaskItem

```sql
SELECT
	DISTINCT ti.Id as TaskItemId,
	ti.TaskItemDescription,
	tis.SkillKey,
	d1.[value] as SkillName,
	tid.DomainKey,
	d2.[value] as DomainName,
	ti.ServiceYear,
	ti.BSM,
	ti.WorkPlace,
	d3.[value] as WorkPlaceName,
	ti.PlanStartDate,
	ti.PlanEndDate,
	t.TaskState
FROM
	PDRC_Task t
JOIN PDRC_TaskItem ti ON t.ID = ti.TaskId
LEFT OUTER JOIN PDRC_TaskItemSkill tis ON ti.id = tis.TaskItemId
LEFT OUTER JOIN PDRC_TaskItemDomain tid ON ti.id = tid.TaskItemId
LEFT OUTER JOIN PDRC_Dictionary d1 ON d1.KeyName = SkillKey
LEFT OUTER JOIN PDRC_Dictionary d2 ON d2.KeyName = DomainKey
LEFT OUTER JOIN PDRC_Dictionary d3 ON d3.KeyName = ti.WorkPlace
```



